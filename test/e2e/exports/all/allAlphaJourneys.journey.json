{
  "meta": {
    "exportDate": "2023-10-09T17:27:59.235Z",
    "exportTool": "frodo",
    "exportToolVersion": "v2.0.0-35 [v18.5.0]",
    "exportedBy": "volker.scheuber@forgerock.com",
    "origin": "https://openam-frodo-dev.forgeblocks.com/am",
    "originAmVersion": "7.4.0"
  },
  "trees": {
    "j00": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "01d3785f-7fb4-44a7-9458-72c380a9818f": {
          "_id": "01d3785f-7fb4-44a7-9458-72c380a9818f",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "39b48197-f4be-42b9-800a-866587b4b9b5": {
          "_id": "39b48197-f4be-42b9-800a-866587b4b9b5",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "3c1e8d61-0c48-44ba-86dc-52e9555b6aeb": {
          "_id": "3c1e8d61-0c48-44ba-86dc-52e9555b6aeb",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "513a2ab4-f0b8-4f94-b840-6fe14796cc84": {
          "_id": "513a2ab4-f0b8-4f94-b840-6fe14796cc84",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b": {
          "_id": "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "3cb43516-ae69-433a-8787-501d45db14e9"
        },
        "d17ffaa1-2c61-4abd-9bb1-2559160d0a5c": {
          "_id": "d17ffaa1-2c61-4abd-9bb1-2559160d0a5c",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "3cb43516-ae69-433a-8787-501d45db14e9": {
          "_id": "3cb43516-ae69-433a-8787-501d45db14e9",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Display sharedState, transientState, and headers.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "debug",
          "script": "\"/* debug\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Display sharedState, transientState, and headers.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - true\\n */\\nvar anchor = \\\"anchor-\\\".concat(generateNumericToken('xxx'));\\nvar halign = \\\"left\\\";\\nvar message = \\\"<p><b>Shared State</b>:<br/>\\\".concat(\\n      sharedState.toString()).concat(\\\"</p>\\\").concat(\\n    \\\"<p><b>Transient State</b>:<br/>\\\").concat(\\n      transientState.toString()).concat(\\\"</p>\\\").concat(\\n    \\\"<p><b>Request Headers</b>:<br/>\\\").concat(\\n      requestHeaders.toString()).concat(\\\"</p>\\\")\\nvar script = \\\"Array.prototype.slice.call(\\\\n\\\".concat(\\n  \\\"document.getElementsByClassName('callback-component')).forEach(\\\\n\\\").concat(\\n  \\\"function (e) {\\\\n\\\").concat(\\n  \\\"  var message = e.firstElementChild;\\\\n\\\").concat(\\n  \\\"  if (message.firstChild && message.firstChild.nodeName == '#text' && message.firstChild.nodeValue.trim() == '\\\").concat(anchor).concat(\\\"') {\\\\n\\\").concat(\\n  \\\"    message.className = \\\\\\\"text-left\\\\\\\";\\\\n\\\").concat(\\n  \\\"    message.align = \\\\\\\"\\\").concat(halign).concat(\\\"\\\\\\\";\\\\n\\\").concat(\\n  \\\"    message.innerHTML = '\\\").concat(message).concat(\\\"';\\\\n\\\").concat(\\n  \\\"  }\\\\n\\\").concat(\\n  \\\"})\\\")\\nvar fr = JavaImporter(\\n    org.forgerock.openam.auth.node.api.Action,\\n    javax.security.auth.callback.TextOutputCallback,\\n    com.sun.identity.authentication.callbacks.ScriptTextOutputCallback\\n)\\nif (message.length && callbacks.isEmpty()) {\\n    action = fr.Action.send(\\n        new fr.TextOutputCallback(\\n            fr.TextOutputCallback.INFORMATION,\\n            anchor\\n        ),\\n        new fr.ScriptTextOutputCallback(script)\\n    ).build()\\n}\\nelse {\\n  action = fr.Action.goTo(\\\"true\\\").build();\\n}\\n\\n /*\\n  * Generate a token in the desired format. All 'x' characters will be replaced with a random number 0-9.\\n  * \\n  * Example:\\n  * 'xxxxx' produces '28535'\\n  * 'xxx-xxx' produces '432-521'\\n  */\\nfunction generateNumericToken(format) {\\n    return format.replace(/[x]/g, function(c) {\\n        var r = Math.random()*10|0;\\n        var v = r;\\n        return v.toString(10);\\n    });\\n}\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j00",
        "enabled": true,
        "entryNodeId": "513a2ab4-f0b8-4f94-b840-6fe14796cc84",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "01d3785f-7fb4-44a7-9458-72c380a9818f": {
            "connections": {
              "true": "3c1e8d61-0c48-44ba-86dc-52e9555b6aeb"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "39b48197-f4be-42b9-800a-866587b4b9b5": {
            "connections": {
              "true": "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "3c1e8d61-0c48-44ba-86dc-52e9555b6aeb": {
            "connections": {
              "true": "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "513a2ab4-f0b8-4f94-b840-6fe14796cc84": {
            "connections": {
              "level only": "39b48197-f4be-42b9-800a-866587b4b9b5",
              "none": "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b",
              "shared and level": "01d3785f-7fb4-44a7-9458-72c380a9818f",
              "shared only": "d17ffaa1-2c61-4abd-9bb1-2559160d0a5c"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b": {
            "connections": {
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "debug",
            "nodeType": "ScriptedDecisionNode",
            "x": 1033,
            "y": 261.015625
          },
          "d17ffaa1-2c61-4abd-9bb1-2559160d0a5c": {
            "connections": {
              "true": "ba503a1e-633e-4d0d-ba18-c9a9b1105b5b"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j01": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "6674b4ac-dd89-4e13-9440-6f81194e3a22": {
          "_id": "6674b4ac-dd89-4e13-9440-6f81194e3a22",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "89ce5d57-82fa-4d58-8d15-0329f7dbd7e7": {
          "_id": "89ce5d57-82fa-4d58-8d15-0329f7dbd7e7",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35": {
          "_id": "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j00"
        },
        "bdfbe97c-1ff4-4162-85bc-47f6f14b2c66": {
          "_id": "bdfbe97c-1ff4-4162-85bc-47f6f14b2c66",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "e92d5139-b8a6-43dc-9b13-95ba1d0dc53c": {
          "_id": "e92d5139-b8a6-43dc-9b13-95ba1d0dc53c",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "f129f0df-b49e-453b-97fb-db508e3893ce": {
          "_id": "f129f0df-b49e-453b-97fb-db508e3893ce",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j01",
        "enabled": true,
        "entryNodeId": "f129f0df-b49e-453b-97fb-db508e3893ce",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "6674b4ac-dd89-4e13-9440-6f81194e3a22": {
            "connections": {
              "true": "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode"
          },
          "89ce5d57-82fa-4d58-8d15-0329f7dbd7e7": {
            "connections": {
              "true": "bdfbe97c-1ff4-4162-85bc-47f6f14b2c66"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode"
          },
          "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode"
          },
          "bdfbe97c-1ff4-4162-85bc-47f6f14b2c66": {
            "connections": {
              "true": "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode"
          },
          "e92d5139-b8a6-43dc-9b13-95ba1d0dc53c": {
            "connections": {
              "true": "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode"
          },
          "f129f0df-b49e-453b-97fb-db508e3893ce": {
            "connections": {
              "level only": "e92d5139-b8a6-43dc-9b13-95ba1d0dc53c",
              "none": "bb1e96af-f316-4eb0-b1c6-36b3f1af9e35",
              "shared and level": "89ce5d57-82fa-4d58-8d15-0329f7dbd7e7",
              "shared only": "6674b4ac-dd89-4e13-9440-6f81194e3a22"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode"
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {},
          "e301438c-0bd0-429c-ab0c-66126501069a": {},
          "startNode": {}
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j02": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "2dbd2d37-c659-48cf-8357-c9fc1166e3a7": {
          "_id": "2dbd2d37-c659-48cf-8357-c9fc1166e3a7",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "4416aff7-3ebd-47e6-9831-c2f6bbe3ae24": {
          "_id": "4416aff7-3ebd-47e6-9831-c2f6bbe3ae24",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "56899fef-92a1-4f2a-ade3-973c81eb3af1": {
          "_id": "56899fef-92a1-4f2a-ade3-973c81eb3af1",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j01"
        },
        "59b06306-a886-443d-92df-7a27a60c394e": {
          "_id": "59b06306-a886-443d-92df-7a27a60c394e",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "cbb3d506-b267-4b99-9edd-363e90aac997": {
          "_id": "cbb3d506-b267-4b99-9edd-363e90aac997",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "e0983ead-4918-48f6-858d-9aff0f03759c": {
          "_id": "e0983ead-4918-48f6-858d-9aff0f03759c",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j02",
        "enabled": true,
        "entryNodeId": "59b06306-a886-443d-92df-7a27a60c394e",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "2dbd2d37-c659-48cf-8357-c9fc1166e3a7": {
            "connections": {
              "true": "56899fef-92a1-4f2a-ade3-973c81eb3af1"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "4416aff7-3ebd-47e6-9831-c2f6bbe3ae24": {
            "connections": {
              "true": "56899fef-92a1-4f2a-ade3-973c81eb3af1"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "56899fef-92a1-4f2a-ade3-973c81eb3af1": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 233.015625
          },
          "59b06306-a886-443d-92df-7a27a60c394e": {
            "connections": {
              "level only": "4416aff7-3ebd-47e6-9831-c2f6bbe3ae24",
              "none": "56899fef-92a1-4f2a-ade3-973c81eb3af1",
              "shared and level": "e0983ead-4918-48f6-858d-9aff0f03759c",
              "shared only": "cbb3d506-b267-4b99-9edd-363e90aac997"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "cbb3d506-b267-4b99-9edd-363e90aac997": {
            "connections": {
              "true": "56899fef-92a1-4f2a-ade3-973c81eb3af1"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "e0983ead-4918-48f6-858d-9aff0f03759c": {
            "connections": {
              "true": "2dbd2d37-c659-48cf-8357-c9fc1166e3a7"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j03": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "35a4f94b-c895-46b9-bc0a-93cf59233759": {
          "_id": "35a4f94b-c895-46b9-bc0a-93cf59233759",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "3a92300d-6d64-451d-8156-30cb51781026": {
          "_id": "3a92300d-6d64-451d-8156-30cb51781026",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "6f9de973-9ed4-41f5-b43d-4036041e2b96": {
          "_id": "6f9de973-9ed4-41f5-b43d-4036041e2b96",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "bcb8c535-5ecd-4d3d-b970-26816de96bf2": {
          "_id": "bcb8c535-5ecd-4d3d-b970-26816de96bf2",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j02"
        },
        "e0cfbd13-6f1e-4924-9d2d-0f7c23507172": {
          "_id": "e0cfbd13-6f1e-4924-9d2d-0f7c23507172",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "fae7424e-13c9-45bd-b3a2-045773671a3f": {
          "_id": "fae7424e-13c9-45bd-b3a2-045773671a3f",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j03",
        "enabled": true,
        "entryNodeId": "e0cfbd13-6f1e-4924-9d2d-0f7c23507172",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "35a4f94b-c895-46b9-bc0a-93cf59233759": {
            "connections": {
              "true": "bcb8c535-5ecd-4d3d-b970-26816de96bf2"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "3a92300d-6d64-451d-8156-30cb51781026": {
            "connections": {
              "true": "bcb8c535-5ecd-4d3d-b970-26816de96bf2"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "6f9de973-9ed4-41f5-b43d-4036041e2b96": {
            "connections": {
              "true": "3a92300d-6d64-451d-8156-30cb51781026"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "bcb8c535-5ecd-4d3d-b970-26816de96bf2": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 233.015625
          },
          "e0cfbd13-6f1e-4924-9d2d-0f7c23507172": {
            "connections": {
              "level only": "35a4f94b-c895-46b9-bc0a-93cf59233759",
              "none": "bcb8c535-5ecd-4d3d-b970-26816de96bf2",
              "shared and level": "6f9de973-9ed4-41f5-b43d-4036041e2b96",
              "shared only": "fae7424e-13c9-45bd-b3a2-045773671a3f"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "fae7424e-13c9-45bd-b3a2-045773671a3f": {
            "connections": {
              "true": "bcb8c535-5ecd-4d3d-b970-26816de96bf2"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j04": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "00e75aa0-2f9b-4895-9257-d515286fd64b": {
          "_id": "00e75aa0-2f9b-4895-9257-d515286fd64b",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j03"
        },
        "040b6c89-313b-4664-92e0-6732017384b8": {
          "_id": "040b6c89-313b-4664-92e0-6732017384b8",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "69ae8ec1-de43-44ac-98e5-733db80ac176": {
          "_id": "69ae8ec1-de43-44ac-98e5-733db80ac176",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "9603ef52-30f0-4ddc-b3c0-28dac83c7bdb": {
          "_id": "9603ef52-30f0-4ddc-b3c0-28dac83c7bdb",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "d10104e9-1f8d-4da6-a110-28d879d13959": {
          "_id": "d10104e9-1f8d-4da6-a110-28d879d13959",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "f5c317ce-fabd-4a10-9907-c71cea037844": {
          "_id": "f5c317ce-fabd-4a10-9907-c71cea037844",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j04",
        "enabled": true,
        "entryNodeId": "040b6c89-313b-4664-92e0-6732017384b8",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "00e75aa0-2f9b-4895-9257-d515286fd64b": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 233.015625
          },
          "040b6c89-313b-4664-92e0-6732017384b8": {
            "connections": {
              "level only": "d10104e9-1f8d-4da6-a110-28d879d13959",
              "none": "00e75aa0-2f9b-4895-9257-d515286fd64b",
              "shared and level": "f5c317ce-fabd-4a10-9907-c71cea037844",
              "shared only": "9603ef52-30f0-4ddc-b3c0-28dac83c7bdb"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "69ae8ec1-de43-44ac-98e5-733db80ac176": {
            "connections": {
              "true": "00e75aa0-2f9b-4895-9257-d515286fd64b"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "9603ef52-30f0-4ddc-b3c0-28dac83c7bdb": {
            "connections": {
              "true": "00e75aa0-2f9b-4895-9257-d515286fd64b"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "d10104e9-1f8d-4da6-a110-28d879d13959": {
            "connections": {
              "true": "00e75aa0-2f9b-4895-9257-d515286fd64b"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "f5c317ce-fabd-4a10-9907-c71cea037844": {
            "connections": {
              "true": "69ae8ec1-de43-44ac-98e5-733db80ac176"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j05": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "11f1c31c-50a9-4717-8213-420f6932481f": {
          "_id": "11f1c31c-50a9-4717-8213-420f6932481f",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "3c106772-ace7-4808-8f3a-9840de8f67f0": {
          "_id": "3c106772-ace7-4808-8f3a-9840de8f67f0",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "622179cb-98f1-484a-820d-9a0df6e45e95": {
          "_id": "622179cb-98f1-484a-820d-9a0df6e45e95",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "a0782616-84b7-4bf5-87ed-a01fb3018563": {
          "_id": "a0782616-84b7-4bf5-87ed-a01fb3018563",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "e90ae257-c279-46e0-9b43-5ecd89784d77": {
          "_id": "e90ae257-c279-46e0-9b43-5ecd89784d77",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "f17ecb7c-abc3-4523-9943-4cbdd90305cb": {
          "_id": "f17ecb7c-abc3-4523-9943-4cbdd90305cb",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j04"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j05",
        "enabled": true,
        "entryNodeId": "622179cb-98f1-484a-820d-9a0df6e45e95",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "11f1c31c-50a9-4717-8213-420f6932481f": {
            "connections": {
              "true": "e90ae257-c279-46e0-9b43-5ecd89784d77"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "3c106772-ace7-4808-8f3a-9840de8f67f0": {
            "connections": {
              "true": "f17ecb7c-abc3-4523-9943-4cbdd90305cb"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "622179cb-98f1-484a-820d-9a0df6e45e95": {
            "connections": {
              "level only": "3c106772-ace7-4808-8f3a-9840de8f67f0",
              "none": "f17ecb7c-abc3-4523-9943-4cbdd90305cb",
              "shared and level": "11f1c31c-50a9-4717-8213-420f6932481f",
              "shared only": "a0782616-84b7-4bf5-87ed-a01fb3018563"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "a0782616-84b7-4bf5-87ed-a01fb3018563": {
            "connections": {
              "true": "f17ecb7c-abc3-4523-9943-4cbdd90305cb"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "e90ae257-c279-46e0-9b43-5ecd89784d77": {
            "connections": {
              "true": "f17ecb7c-abc3-4523-9943-4cbdd90305cb"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "f17ecb7c-abc3-4523-9943-4cbdd90305cb": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 232.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j06": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "1d59caff-243c-45bd-b7d0-6dcc563989c5": {
          "_id": "1d59caff-243c-45bd-b7d0-6dcc563989c5",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "2de08e9e-bf7b-4fa1-8265-59a8e4a3f7c3": {
          "_id": "2de08e9e-bf7b-4fa1-8265-59a8e4a3f7c3",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "409c251f-c23b-411d-9009-d3b3d26d1b90": {
          "_id": "409c251f-c23b-411d-9009-d3b3d26d1b90",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j05"
        },
        "44b8651c-7c1e-41f1-b9a6-2e441b0ce05a": {
          "_id": "44b8651c-7c1e-41f1-b9a6-2e441b0ce05a",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "da878771-421c-463f-aad7-4d5f2ad5e59a": {
          "_id": "da878771-421c-463f-aad7-4d5f2ad5e59a",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "fe8f27df-8a27-4d88-9196-834ce398b2b7": {
          "_id": "fe8f27df-8a27-4d88-9196-834ce398b2b7",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j06",
        "enabled": true,
        "entryNodeId": "44b8651c-7c1e-41f1-b9a6-2e441b0ce05a",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "1d59caff-243c-45bd-b7d0-6dcc563989c5": {
            "connections": {
              "true": "2de08e9e-bf7b-4fa1-8265-59a8e4a3f7c3"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "2de08e9e-bf7b-4fa1-8265-59a8e4a3f7c3": {
            "connections": {
              "true": "409c251f-c23b-411d-9009-d3b3d26d1b90"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "409c251f-c23b-411d-9009-d3b3d26d1b90": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 232.015625
          },
          "44b8651c-7c1e-41f1-b9a6-2e441b0ce05a": {
            "connections": {
              "level only": "fe8f27df-8a27-4d88-9196-834ce398b2b7",
              "none": "409c251f-c23b-411d-9009-d3b3d26d1b90",
              "shared and level": "1d59caff-243c-45bd-b7d0-6dcc563989c5",
              "shared only": "da878771-421c-463f-aad7-4d5f2ad5e59a"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "da878771-421c-463f-aad7-4d5f2ad5e59a": {
            "connections": {
              "true": "409c251f-c23b-411d-9009-d3b3d26d1b90"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "fe8f27df-8a27-4d88-9196-834ce398b2b7": {
            "connections": {
              "true": "409c251f-c23b-411d-9009-d3b3d26d1b90"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j07": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "13b12fe6-cf53-46a4-a83d-0a3c1fda814f": {
          "_id": "13b12fe6-cf53-46a4-a83d-0a3c1fda814f",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "ac6ee166-73c0-4f73-b8db-4fe8ff6a25c0": {
          "_id": "ac6ee166-73c0-4f73-b8db-4fe8ff6a25c0",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "d90dd9f8-8b12-4e90-abaf-228ecc0174a7": {
          "_id": "d90dd9f8-8b12-4e90-abaf-228ecc0174a7",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "d9a06d3a-7e3f-4244-9a32-63ffa0d26e00": {
          "_id": "d9a06d3a-7e3f-4244-9a32-63ffa0d26e00",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9": {
          "_id": "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j06"
        },
        "f2fe740c-cd75-460a-8baa-fe4b52ecc947": {
          "_id": "f2fe740c-cd75-460a-8baa-fe4b52ecc947",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j07",
        "enabled": true,
        "entryNodeId": "13b12fe6-cf53-46a4-a83d-0a3c1fda814f",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "13b12fe6-cf53-46a4-a83d-0a3c1fda814f": {
            "connections": {
              "level only": "d90dd9f8-8b12-4e90-abaf-228ecc0174a7",
              "none": "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9",
              "shared and level": "d9a06d3a-7e3f-4244-9a32-63ffa0d26e00",
              "shared only": "ac6ee166-73c0-4f73-b8db-4fe8ff6a25c0"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "ac6ee166-73c0-4f73-b8db-4fe8ff6a25c0": {
            "connections": {
              "true": "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "d90dd9f8-8b12-4e90-abaf-228ecc0174a7": {
            "connections": {
              "true": "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "d9a06d3a-7e3f-4244-9a32-63ffa0d26e00": {
            "connections": {
              "true": "f2fe740c-cd75-460a-8baa-fe4b52ecc947"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 232.015625
          },
          "f2fe740c-cd75-460a-8baa-fe4b52ecc947": {
            "connections": {
              "true": "e62d7a4d-2012-4a2a-a6ef-d6a0e0d552d9"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j08": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "042b600b-71cb-45a8-93ae-a6f57b16a6e5": {
          "_id": "042b600b-71cb-45a8-93ae-a6f57b16a6e5",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "66026170-5088-4fcd-a6c8-ed89d7a5c79d": {
          "_id": "66026170-5088-4fcd-a6c8-ed89d7a5c79d",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j07"
        },
        "8096649e-973e-4209-88ce-e1d87ae2bb96": {
          "_id": "8096649e-973e-4209-88ce-e1d87ae2bb96",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "87ced99b-bfa5-40d4-ba07-c8fc31f6cc6d": {
          "_id": "87ced99b-bfa5-40d4-ba07-c8fc31f6cc6d",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "948e21f4-c512-450a-9d42-e0d629217834": {
          "_id": "948e21f4-c512-450a-9d42-e0d629217834",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "d429b2b5-b215-46a5-b239-4994df65cb8b": {
          "_id": "d429b2b5-b215-46a5-b239-4994df65cb8b",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j08",
        "enabled": true,
        "entryNodeId": "d429b2b5-b215-46a5-b239-4994df65cb8b",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "042b600b-71cb-45a8-93ae-a6f57b16a6e5": {
            "connections": {
              "true": "87ced99b-bfa5-40d4-ba07-c8fc31f6cc6d"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "66026170-5088-4fcd-a6c8-ed89d7a5c79d": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 232.015625
          },
          "8096649e-973e-4209-88ce-e1d87ae2bb96": {
            "connections": {
              "true": "66026170-5088-4fcd-a6c8-ed89d7a5c79d"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "87ced99b-bfa5-40d4-ba07-c8fc31f6cc6d": {
            "connections": {
              "true": "66026170-5088-4fcd-a6c8-ed89d7a5c79d"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "948e21f4-c512-450a-9d42-e0d629217834": {
            "connections": {
              "true": "66026170-5088-4fcd-a6c8-ed89d7a5c79d"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "d429b2b5-b215-46a5-b239-4994df65cb8b": {
            "connections": {
              "level only": "8096649e-973e-4209-88ce-e1d87ae2bb96",
              "none": "66026170-5088-4fcd-a6c8-ed89d7a5c79d",
              "shared and level": "042b600b-71cb-45a8-93ae-a6f57b16a6e5",
              "shared only": "948e21f4-c512-450a-9d42-e0d629217834"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j09": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "251f35c3-1a32-4520-be10-1f4af9600935": {
          "_id": "251f35c3-1a32-4520-be10-1f4af9600935",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        },
        "56b82371-0c61-4dc3-8d06-c1158415b8f9": {
          "_id": "56b82371-0c61-4dc3-8d06-c1158415b8f9",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "6df24fdd-0b6c-4def-bf42-77af998f28b8": {
          "_id": "6df24fdd-0b6c-4def-bf42-77af998f28b8",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j08"
        },
        "8c5e9cb5-471b-4dd6-b150-ecaaeda98195": {
          "_id": "8c5e9cb5-471b-4dd6-b150-ecaaeda98195",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "bb294e05-6b6b-4478-b46f-b8d9e7711c66": {
          "_id": "bb294e05-6b6b-4478-b46f-b8d9e7711c66",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "f57cf53c-b4c6-48f7-84e8-91f535a2e8f8": {
          "_id": "f57cf53c-b4c6-48f7-84e8-91f535a2e8f8",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j09",
        "enabled": true,
        "entryNodeId": "251f35c3-1a32-4520-be10-1f4af9600935",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "251f35c3-1a32-4520-be10-1f4af9600935": {
            "connections": {
              "level only": "56b82371-0c61-4dc3-8d06-c1158415b8f9",
              "none": "6df24fdd-0b6c-4def-bf42-77af998f28b8",
              "shared and level": "8c5e9cb5-471b-4dd6-b150-ecaaeda98195",
              "shared only": "f57cf53c-b4c6-48f7-84e8-91f535a2e8f8"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          },
          "56b82371-0c61-4dc3-8d06-c1158415b8f9": {
            "connections": {
              "true": "6df24fdd-0b6c-4def-bf42-77af998f28b8"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "6df24fdd-0b6c-4def-bf42-77af998f28b8": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 233.015625
          },
          "8c5e9cb5-471b-4dd6-b150-ecaaeda98195": {
            "connections": {
              "true": "bb294e05-6b6b-4478-b46f-b8d9e7711c66"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "bb294e05-6b6b-4478-b46f-b8d9e7711c66": {
            "connections": {
              "true": "6df24fdd-0b6c-4def-bf42-77af998f28b8"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "f57cf53c-b4c6-48f7-84e8-91f535a2e8f8": {
            "connections": {
              "true": "6df24fdd-0b6c-4def-bf42-77af998f28b8"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    },
    "j10": {
      "circlesOfTrust": {},
      "emailTemplates": {},
      "innerNodes": {},
      "nodes": {
        "300feda0-3248-49a9-b60f-01df802b2229": {
          "_id": "300feda0-3248-49a9-b60f-01df802b2229",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "40afb384-e9b6-4dcb-acde-04de109474c8": {
          "_id": "40afb384-e9b6-4dcb-acde-04de109474c8",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "8d7d64ee-da20-461f-a2ca-206b7479dd67": {
          "_id": "8d7d64ee-da20-461f-a2ca-206b7479dd67",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "41c24257-d7fc-4654-8b46-c2666dc5b56d"
        },
        "97ef9d96-99e7-4d2d-b6c6-4177b5397ead": {
          "_id": "97ef9d96-99e7-4d2d-b6c6-4177b5397ead",
          "_outcomes": [
            {
              "displayName": "true",
              "id": "true"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*"
          ],
          "outcomes": [
            "true"
          ],
          "outputs": [
            "*"
          ],
          "script": "1b52a7e0-4019-40fa-958a-15a49870e901"
        },
        "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd": {
          "_id": "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd",
          "_outcomes": [
            {
              "displayName": "True",
              "id": "true"
            },
            {
              "displayName": "False",
              "id": "false"
            }
          ],
          "_type": {
            "_id": "InnerTreeEvaluatorNode",
            "collection": true,
            "name": "Inner Tree Evaluator"
          },
          "tree": "j09"
        },
        "c91d626e-1156-41bd-b1fb-d292f640fba6": {
          "_id": "c91d626e-1156-41bd-b1fb-d292f640fba6",
          "_outcomes": [
            {
              "displayName": "shared and level",
              "id": "shared and level"
            },
            {
              "displayName": "shared only",
              "id": "shared only"
            },
            {
              "displayName": "level only",
              "id": "level only"
            },
            {
              "displayName": "none",
              "id": "none"
            }
          ],
          "_type": {
            "_id": "ScriptedDecisionNode",
            "collection": true,
            "name": "Scripted Decision"
          },
          "inputs": [
            "*",
            "mode",
            "level"
          ],
          "outcomes": [
            "shared and level",
            "shared only",
            "level only",
            "none"
          ],
          "outputs": [
            "*",
            "mode",
            "level"
          ],
          "script": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6"
        }
      },
      "saml2Entities": {},
      "scripts": {
        "1b52a7e0-4019-40fa-958a-15a49870e901": {
          "_id": "1b52a7e0-4019-40fa-958a-15a49870e901",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set the same shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "shared",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('sharedValue', 'Level ' + level + ': This is a longer string value shared across all nested journeys. It contains an indicator in which level it was last set.');\\n}());\""
        },
        "41c24257-d7fc-4654-8b46-c2666dc5b56d": {
          "_id": "41c24257-d7fc-4654-8b46-c2666dc5b56d",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "set per level shared state variable",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "level",
          "script": "\"(function () {\\n  outcome = 'true';\\n  var level = nodeState.get('level').asInteger();\\n  sharedState.put('level' + level + 'Value', 'Level ' + level + ': This is a longer string value set at each level of the nested journeys. It contains an indicator in which level it was set.');\\n}());\""
        },
        "5bbdaeff-ddee-44b9-b608-8d413d7d65a6": {
          "_id": "5bbdaeff-ddee-44b9-b608-8d413d7d65a6",
          "context": "AUTHENTICATION_TREE_DECISION_NODE",
          "createdBy": "null",
          "creationDate": 0,
          "default": false,
          "description": "Check if mode has already been set.",
          "language": "JAVASCRIPT",
          "lastModifiedBy": "null",
          "lastModifiedDate": 0,
          "name": "mode",
          "script": "\"/* mode\\n *\\n * Author: volker.scheuber@forgerock.com\\n * \\n * Collect mode if not already set and set outcome to mode.\\n * \\n * This script does not need to be parametrized. It will work properly as is.\\n * \\n * The Scripted Decision Node needs the following outcomes defined:\\n * - 'shared and level'\\n * - 'shared only'\\n * - 'level only'\\n * - 'none'\\n */\\n(function () {\\n  var mode = nodeState.get('mode');\\n  if (mode) {\\n    outcome = mode.asString();\\n    var level = nodeState.get('level').asInteger() + 1;\\n    logger.error('mode: mode=' + mode.asString() + ', level=' + level);\\n    sharedState.put('level', level);\\n  }\\n  else {\\n    var choices = ['shared and level', 'shared only', 'level only', 'none'];\\n  \\n    var fr = JavaImporter(\\n      org.forgerock.openam.auth.node.api.Action,\\n      javax.security.auth.callback.ChoiceCallback\\n    )\\n\\n    if (callbacks.isEmpty()) {\\n      action = fr.Action.send([\\n        new fr.ChoiceCallback('Choose test mode', choices, 0, false)\\n      ]).build();\\n    } else {\\n      var choice = parseInt(callbacks.get(0).getSelectedIndexes()[0]);\\n      nodeState.putShared('mode', choices[choice]);\\n      nodeState.putShared('level', 0);\\n      action = fr.Action.goTo(choices[choice]).build();\\n    }\\n  }\\n}());\""
        }
      },
      "socialIdentityProviders": {},
      "themes": [],
      "tree": {
        "_id": "j10",
        "enabled": true,
        "entryNodeId": "c91d626e-1156-41bd-b1fb-d292f640fba6",
        "identityResource": "managed/alpha_user",
        "innerTreeOnly": false,
        "nodes": {
          "300feda0-3248-49a9-b60f-01df802b2229": {
            "connections": {
              "true": "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 395,
            "y": 345.015625
          },
          "40afb384-e9b6-4dcb-acde-04de109474c8": {
            "connections": {
              "true": "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 393,
            "y": 259.015625
          },
          "8d7d64ee-da20-461f-a2ca-206b7479dd67": {
            "connections": {
              "true": "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd"
            },
            "displayName": "level",
            "nodeType": "ScriptedDecisionNode",
            "x": 598,
            "y": 173.015625
          },
          "97ef9d96-99e7-4d2d-b6c6-4177b5397ead": {
            "connections": {
              "true": "8d7d64ee-da20-461f-a2ca-206b7479dd67"
            },
            "displayName": "shared",
            "nodeType": "ScriptedDecisionNode",
            "x": 392,
            "y": 173.015625
          },
          "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd": {
            "connections": {
              "false": "e301438c-0bd0-429c-ab0c-66126501069a",
              "true": "e301438c-0bd0-429c-ab0c-66126501069a"
            },
            "displayName": "nest",
            "nodeType": "InnerTreeEvaluatorNode",
            "x": 816,
            "y": 233.015625
          },
          "c91d626e-1156-41bd-b1fb-d292f640fba6": {
            "connections": {
              "level only": "300feda0-3248-49a9-b60f-01df802b2229",
              "none": "c7fcf7ae-1ab5-474b-b5b0-272e10468fbd",
              "shared and level": "97ef9d96-99e7-4d2d-b6c6-4177b5397ead",
              "shared only": "40afb384-e9b6-4dcb-acde-04de109474c8"
            },
            "displayName": "mode",
            "nodeType": "ScriptedDecisionNode",
            "x": 167,
            "y": 210.015625
          }
        },
        "staticNodes": {
          "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
            "x": 1236,
            "y": 145
          },
          "e301438c-0bd0-429c-ab0c-66126501069a": {
            "x": 1236,
            "y": 253
          },
          "startNode": {
            "x": 50,
            "y": 250
          }
        },
        "uiConfig": {
          "categories": "[]"
        }
      }
    }
  }
}
